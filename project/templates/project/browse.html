{% extends 'project/base.html' %}

{% block content %}
<h1>Browse Rentals</h1>

<h2>Friends' Rentals</h2>
<div class="browse-grid">
    {% for item in friends_items %}
    <div class="rental-item">
        <h3>{{ item.name }}</h3>
        {% if item.org.profile_picture %}
        <img src="{{ item.org.profile_picture.url }}" alt="{{ item.org.name }}'s Profile Picture" class="profile-picture">
        {% else %}
        <p><em>No profile picture available.</em></p>
        {% endif %}
        <p>{{ item.description }}</p>
        <p>Type: {{ item.item_type }}</p>
        <p>Price: ${{ item.pricing_per_unit }}</p>

        {% if item.item_type == "Prop" %}
            <p>Quantity: {{ item.prop }}</p>
        {% else %}
            <p>Sizes: 
                Extra Small: {{ item.size_xs }},
                Small: {{ item.size_s }},
                Medium: {{ item.size_m }},
                Large: {{ item.size_l }},
                Extra Large: {{ item.size_xl }}
            </p>
        {% endif %}

        {% if item.image %}
            <img src="{{ item.image.url }}" alt="Item Image" class="item-image">
        {% else %}
            <p><em>No image available for this item.</em></p>
        {% endif %}
        {% if item.org == user_org %}
            <p><em>You cannot rent your own items.</em></p>
        {% else %}
            <a href="{% url 'rent_item' item.id %}">Rent</a>
        {% endif %}
    </div>
    {% empty %}
    <p>No rentals available from your friends.</p>
    {% endfor %}
</div>

<h2>Other Rentals</h2>
<div class="browse-grid">
    {% for item in other_items %}
    <div class="rental-item">
        <h3>{{ item.name }}</h3>
        {% if item.org.profile_picture %}
        <img src="{{ item.org.profile_picture.url }}" alt="{{ item.org.name }}'s Profile Picture" class="profile-picture">
        {% else %}
        <p><em>No profile picture available.</em></p>
        {% endif %}
        <p>{{ item.description }}</p>
        <p>Type: {{ item.item_type }}</p>
        <p>Price: ${{ item.pricing_per_unit }}</p>

        {% if item.item_type == "Prop" %}
            <p>Quantity: {{ item.prop }}</p>
        {% else %}
            <p>Sizes: 
                Extra Small: {{ item.size_xs }},
                Small: {{ item.size_s }},
                Medium: {{ item.size_m }},
                Large: {{ item.size_l }},
                Extra Large: {{ item.size_xl }}
            </p>
        {% endif %}

        {% if item.image %}
            <img src="{{ item.image.url }}" alt="Item Image" class="item-image">
        {% else %}
            <p><em>No image available for this item.</em></p>
        {% endif %}
        {% if item.org == user_org %}
            <p><em>You cannot rent your own items.</em></p>
        {% else %}
            <a href="{% url 'rent_item' item.id %}">Rent</a>
        {% endif %}
    </div>
    {% empty %}
    <p>No other rentals available.</p>
    {% endfor %}
</div>
{% endblock %}